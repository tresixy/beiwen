# å­è·¯ç”±èµ„æºåŠ è½½é—®é¢˜ä¿®å¤

## é—®é¢˜æè¿°

è®¿é—® `/cardsdatabase/` æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š

```
Failed to load module script: Expected a JavaScript module script 
but the server responded with a MIME type of "text/html".
```

## åŸå› åˆ†æ

**é—®é¢˜æ ¹æºï¼š** Vite é…ç½®ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„ `base: './'`

å½“ `index.html` ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆ`./assets/xxx.js`ï¼‰æ—¶ï¼š
- è®¿é—® `/` â†’ åŠ è½½ `/assets/xxx.js` âœ…
- è®¿é—® `/cardsdatabase/` â†’ åŠ è½½ `/cardsdatabase/assets/xxx.js` âŒ è·¯å¾„ä¸å­˜åœ¨

æµè§ˆå™¨å°†ç›¸å¯¹è·¯å¾„è§£æä¸ºå½“å‰ç›®å½•ä¸‹çš„è·¯å¾„ï¼Œå¯¼è‡´åœ¨å­è·¯å¾„è®¿é—®æ—¶èµ„æºæ‰¾ä¸åˆ°ã€‚

## è§£å†³æ–¹æ¡ˆ

ä¿®æ”¹ Vite é…ç½®ï¼Œä½¿ç”¨**ç»å¯¹è·¯å¾„** `base: '/'`

### ä¿®æ”¹æ–‡ä»¶

**1. client/vite/config.prod.mjs**
```javascript
export default defineConfig({
    base: '/', // æ”¹ä¸ºç»å¯¹è·¯å¾„
    // ... å…¶ä»–é…ç½®
});
```

**2. client/vite/config.dev.mjs**
```javascript
export default defineConfig({
    base: '/', // æ”¹ä¸ºç»å¯¹è·¯å¾„
    // ... å…¶ä»–é…ç½®
});
```

### é‡æ–°æ„å»º

```bash
cd /root/minigame
npm run client:build
./service.sh restart
```

## éªŒè¯ä¿®å¤

æ„å»ºåçš„ `client/dist/index.html` åº”åŒ…å«ç»å¯¹è·¯å¾„ï¼š

**ä¿®å¤å‰ï¼š**
```html
<script src="./assets/index-xxx.js"></script>  <!-- ç›¸å¯¹è·¯å¾„ -->
<link href="./assets/index-xxx.css">
```

**ä¿®å¤åï¼š**
```html
<script src="/assets/index-xxx.js"></script>   <!-- ç»å¯¹è·¯å¾„ -->
<link href="/assets/index-xxx.css">
```

## å½±å“èŒƒå›´

æ­¤ä¿®å¤ä½¿å¾—åº”ç”¨å¯ä»¥åœ¨**ä»»æ„è·¯å¾„**ä¸‹æ­£å¸¸å·¥ä½œï¼š
- `/` - æ ¹è·¯å¾„ âœ…
- `/cardsdatabase` - å¡ç‰Œç®¡ç† âœ…  
- `/cardsdatabase/` - å¸¦å°¾éƒ¨æ–œæ  âœ…
- ä»»ä½•å…¶ä»–å­è·¯å¾„ âœ…

## ç›¸å…³é“¾æ¥

- [Vite é…ç½®æ–‡æ¡£ - base é€‰é¡¹](https://vitejs.dev/config/shared-options.html#base)
- [SPA è·¯ç”±æœ€ä½³å®è·µ](https://router.vuejs.org/guide/essentials/history-mode.html)

## è®¿é—®è·¯å¾„è¯´æ˜

**å¡ç‰Œæ•°æ®åº“ç®¡ç†ç•Œé¢ï¼š**
- æ­£ç¡®è·¯å¾„ï¼šhttp://43.161.234.121/cardsdatabase
- æ³¨æ„æ‹¼å†™ï¼šæ˜¯ `cards**database**`ï¼ˆæœ‰'s'ï¼‰

**è®¿é—®æ–¹å¼ï¼š**
1. ç™»å½•æ¸¸æˆ
2. è¿›å…¥å¤§å…
3. ç‚¹å‡»è®¾ç½® âš™ï¸
4. ç‚¹å‡»ã€ŒğŸ´ å¡ç‰Œæ•°æ®åº“ã€æŒ‰é’®ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰

æˆ–ç›´æ¥è®¿é—®ï¼šhttp://43.161.234.121/cardsdatabase


